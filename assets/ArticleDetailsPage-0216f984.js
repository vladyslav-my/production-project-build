import{b as x,j as e,d as r,g as c,A as R,h as E,i as I,k as B,m as H,r as o,B as p,e as O,S as v,n as k,M as P,I as T,o as S,p as y,q,s as F,t as z,N as U}from"./index-a0e0f2b4.js";import{u as W,I as G,S as n}from"./useDynamicReduce-d9c5826b.js";import{R as w}from"./RouteContainer-a7948b33.js";const Q=s=>{var t;return(t=s.articleDeteils)==null?void 0:t.error},Z=s=>{var t;return(t=s.articleDeteils)==null?void 0:t.isLoading},J=s=>{var t;return(t=s.articleDeteils)==null?void 0:t.data},K=({className:s})=>{W({articleDeteils:I},!1);const t=x(J);return e.jsxs("div",{className:r(c.ArticleView,{},[s,c.ArticleView_list]),children:[e.jsxs("div",{className:r(c.top,{},[c.ArticleView_top]),children:[e.jsx(R,{className:c.top__avatar,size:32,src:t==null?void 0:t.user.avatar}),e.jsx("span",{className:c.top__user,children:t==null?void 0:t.user.username}),e.jsx("span",{className:c.top__date,children:t==null?void 0:t.createdAt})]}),e.jsx("h2",{className:c.ArticleView__title,children:t==null?void 0:t.title}),e.jsx("h3",{className:c.ArticleView__subTitle,children:t==null?void 0:t.subtitle}),e.jsx(G,{className:c.ArticleView__image,width:732,height:420,src:t==null?void 0:t.img}),e.jsx(E,{data:t==null?void 0:t.blocks})]})},X=({className:s})=>e.jsxs("div",{className:r(c.ArticleView,{},[s,c.ArticleView_list]),children:[e.jsxs("div",{className:r(c.top,{},[c.ArticleView__top]),children:[e.jsx(n,{circle:"100%",className:c.top__avatar,height:"32px",width:"32px"}),e.jsx(n,{circle:"8px",className:c.top__user,height:"22px",width:"57px"}),e.jsx(n,{circle:"8px",className:c.top__date,height:"22px",width:"84px"})]}),e.jsxs("div",{className:c.ArticleView__title,children:[e.jsx(n,{circle:"8px",className:c.top__date,height:"38px",width:"100%"}),e.jsx(n,{circle:"8px",className:c.top__date,height:"38px",width:"90%"})]}),e.jsx("div",{className:c.ArticleView__subTitle,children:e.jsx(n,{circle:"8px",className:c.top__date,height:"27px",width:"80%"})}),e.jsx(n,{circle:8,className:c.ArticleView__image,height:420,isImage:!0,width:732}),e.jsxs("div",{className:r(c.bottom,{},[c.ArticleView__bottom]),children:[e.jsx(n,{circle:4,height:32,width:260}),e.jsxs("div",{children:[e.jsx(n,{circle:4,className:c.bottom__paragraph,height:17,width:"90%"}),e.jsx(n,{circle:4,height:17,width:"97%"}),e.jsx(n,{circle:4,height:17,width:"98%"}),e.jsx(n,{circle:4,height:17,width:"96%"}),e.jsx(n,{circle:4,height:17,width:"98%"}),e.jsx(n,{circle:4,height:17,width:"85%"})]}),e.jsxs("div",{children:[e.jsx(n,{circle:4,className:c.bottom__paragraph,height:17,width:"90%"}),e.jsx(n,{circle:4,height:17,width:"97%"}),e.jsx(n,{circle:4,height:17,width:"98%"}),e.jsx(n,{circle:4,height:17,width:"96%"})]})]})]}),Y={},ee=({className:s})=>{const t=B(),{t:a}=H(),i=o.useCallback(()=>{t(-1)},[t]);return e.jsx(p,{className:r(Y.BackToPrevRoute,{},[s]),theme:O.OUTLINE,onClick:i,children:a("back")})},N={},te=({className:s})=>e.jsx(v,{className:r(N.RouteFeaturesContainer,{},[s]),children:e.jsx(ee,{className:N.RouteFeaturesContainer__back})}),se=s=>o.createElement("svg",{viewBox:"0 0 32 30",xmlns:"http://www.w3.org/2000/svg",...s},o.createElement("path",{d:"M24.5256 28.4382L24.5251 28.4379L17.2746 24.1362C16.4895 23.6704 15.513 23.6695 14.7271 24.134L7.47711 28.4182L7.47444 28.4198C7.38249 28.4744 7.30836 28.4848 7.24894 28.481C7.18194 28.4767 7.10962 28.4519 7.04524 28.406C6.98073 28.36 6.94071 28.3046 6.92105 28.2564C6.90466 28.2162 6.89332 28.1612 6.91364 28.0751C6.91367 28.075 6.91371 28.0748 6.91374 28.0747L8.82874 20.0141C9.04603 19.0995 8.73185 18.1403 8.01554 17.5314L1.62021 12.0955L1.61968 12.095C1.54345 12.0303 1.5188 11.9742 1.50839 11.9336C1.49593 11.8851 1.49596 11.8228 1.51813 11.7562C1.54031 11.6895 1.57928 11.6349 1.62472 11.5979C1.66425 11.5657 1.7255 11.5322 1.83124 11.524L1.83124 11.524L1.83902 11.5234L10.2735 10.821C11.1921 10.7445 11.994 10.1688 12.3602 9.32297L15.6563 1.71027L15.6563 1.71027L15.6588 1.70438C15.6919 1.62701 15.7345 1.58535 15.7806 1.55709C15.8341 1.52427 15.9105 1.5 16 1.5C16.0895 1.5 16.1659 1.52427 16.2194 1.55709C16.2655 1.58535 16.3081 1.62701 16.3412 1.70439L16.3432 1.70914L19.6395 9.33948C20.0053 10.1863 20.8078 10.7629 21.7271 10.8394L30.161 11.5417L30.161 11.5417L30.1688 11.5423C30.2745 11.5506 30.3358 11.584 30.3753 11.6162C30.4207 11.6532 30.4597 11.7078 30.4819 11.7745C30.504 11.8411 30.5041 11.9034 30.4916 11.952C30.4812 11.9926 30.4565 12.0487 30.3803 12.1134L30.3798 12.1138L23.9845 17.5497C23.2682 18.1586 22.954 19.1178 23.1713 20.0325L25.0863 28.093C25.1067 28.1794 25.0954 28.2344 25.079 28.2747C25.0593 28.323 25.0193 28.3783 24.9548 28.4243C24.8904 28.4703 24.8181 28.495 24.7511 28.4993C24.6916 28.5031 24.6175 28.4928 24.5256 28.4382Z",strokeWidth:3})),ie=k.injectEndpoints({endpoints:s=>({getArticleRating:s.query({providesTags:["Rating"],query:({articleId:t,userId:a})=>({url:"rating",params:{articleId:t,userId:a}}),transformResponse:(t,a,i)=>t[0]}),writeArticleRating:s.mutation({invalidatesTags:["Rating"],query:({articleId:t,userId:a,stars:i,feedback:l})=>({url:"rating",method:"POST",body:{articleId:t,userId:a,stars:i,feedback:l}})})}),overrideExisting:!1}),{useGetArticleRatingQuery:ce,useWriteArticleRatingMutation:ae}=ie,ne={},re=({className:s,oppened:t,onToggle:a,onSend:i})=>{const[l,_]=o.useState(""),h=C=>{_(C)};return e.jsxs(P,{className:r(ne.RatingModal,{},[s]),lazy:!0,oppened:t,onToggle:a,children:[e.jsx("h2",{children:"Залиште свій відгук про прочитану статтю, це допоможе нам покращити якість"}),e.jsx(T,{label:"Feedback",value:l,onChange:h}),e.jsx(p,{onClick:i(l),children:"Відправити"}),e.jsx(p,{onClick:i(),children:"Закрити"})]})},oe="_Rating_o9p7y_1",le="_stars_o9p7y_7",me="_stars__item_o9p7y_10",de="_stars__item_active_o9p7y_17",g={Rating:oe,stars:le,stars__item:me,stars__item_active:de},_e=[1,2,3,4,5],he=({className:s,articleId:t})=>{x(S);const[a]=ae(),{data:i,isLoading:l}=ce({articleId:t,userId:1}),[_,h]=o.useState(0),[C,u]=o.useState(0),[b,j]=o.useState(!1);o.useEffect(()=>{u((i==null?void 0:i.stars)||0)},[i]);const D=m=>()=>{i!=null&&i.stars||h(m)},V=()=>{i!=null&&i.stars||h(0)},M=m=>()=>{i!=null&&i.stars||(u(m),j(!0))},$=m=>()=>{a({articleId:t,userId:1,stars:C,feedback:m}),j(!1)};return l?e.jsx("div",{children:"Loading"}):e.jsxs("div",{className:r(g.Rating,{},[s]),children:[i?e.jsx("h2",{children:"Дякую за оцінку"}):e.jsx("h2",{children:"Оцініть статтю"}),e.jsx("div",{className:g.stars,children:_e.map(m=>e.jsx(y,{Svg:se,className:r(g.stars__item,{[g.stars__item_active]:m<=_||m<=C},[]),height:30,width:32,onClick:M(m),onMouseOut:V,onMouseOver:D(m)},m))}),e.jsx(re,{oppened:b,onSend:$,onToggle:j})]})},Ce=k.injectEndpoints({endpoints:s=>({getArticleComments:s.query({providesTags:["Comments"],query:t=>({url:"comments",params:{_expand:"user",articleId:t}})}),updateArticleComments:s.mutation({invalidatesTags:["Comments"],query:({articleId:t,userId:a,comment:i})=>({url:"comments",method:"POST",body:{articleId:t,userId:a,comment:i}})})}),overrideExisting:!1}),{useGetArticleCommentsQuery:xe,useUpdateArticleCommentsMutation:ue}=Ce,ge="_CommentCard_1op3t_1",pe="_CommentCard__avatar_1op3t_5",je="_CommentCard__comment_1op3t_8",d={CommentCard:ge,CommentCard__avatar:pe,CommentCard__comment:je},Ae=({className:s,data:t})=>e.jsxs("div",{className:r(d.CommentCard,{},[s]),children:[e.jsx(R,{className:d.CommentCard__avatar,size:32,src:t.user.avatar}),e.jsx("p",{className:d.CommentCard__comment,children:t.comment})]}),ve=({className:s})=>e.jsxs("div",{className:r(d.CommentCard,{},[s]),children:[e.jsx(n,{circle:"100%",className:d.CommentCard__avatar,height:32,width:32}),e.jsxs("div",{className:d.CommentCard__comment,children:[e.jsx(n,{circle:8,className:d.CommentCard__avatar,height:22,width:"95%"}),e.jsx(n,{circle:8,className:d.CommentCard__avatar,height:22,width:"90%"}),e.jsx(n,{circle:8,className:d.CommentCard__avatar,height:22,width:"98%"})]})]}),we="_ArticleCommentTape_1ye5l_1",Ne={ArticleCommentTape:we},Le=({className:s,articleId:t})=>{const{isLoading:a,data:i}=xe(t);return a?e.jsx(ve,{}):(i==null?void 0:i.length)===0?e.jsx("div",{children:"No comments"}):e.jsx("div",{className:r(Ne.ArticleCommentTape,{},[s]),children:i==null?void 0:i.map(l=>e.jsx(Ae,{data:l},l.id))})},fe=s=>o.createElement("svg",{width:32,height:28,viewBox:"0 0 32 28",xmlns:"http://www.w3.org/2000/svg",...s},o.createElement("path",{d:"M2.57102 27.8471C1.95887 28.0958 1.37733 28.0411 0.826399 27.683C0.275466 27.325 0 26.8047 0 26.1222V19.1756C0 18.7404 0.12243 18.3519 0.367289 18.01C0.612147 17.6682 0.948828 17.4506 1.37733 17.3573L10.8455 14.9703C11.8529 14.7163 11.8528 13.2849 10.8455 13.031L1.37733 10.6439C0.948828 10.5506 0.612147 10.3331 0.367289 9.99118C0.12243 9.64929 0 9.26077 0 8.82564V1.87906C0 1.19528 0.275466 0.674368 0.826399 0.316316C1.37733 -0.0417356 1.95887 -0.0958171 2.57102 0.154073L30.8522 12.2756C31.6174 12.6175 32 13.1925 32 14.0006C32 14.8087 31.6174 15.3837 30.8522 15.7256L2.57102 27.8471Z"})),Re="_AddArticleComment_1wwf4_1",ke="_AddArticleComment__input_1wwf4_6",Te="_AddArticleComment__icon_1wwf4_9",A={AddArticleComment:Re,AddArticleComment__input:ke,AddArticleComment__icon:Te},Se=({className:s,articleId:t})=>{const a=x(S),[i,l]=o.useState(""),_=o.useCallback(u=>{l(u)},[]),[h]=ue(),C=o.useCallback(()=>{a&&h({userId:a.id||a,articleId:t,comment:i}),l("")},[i,t,a,h]);return e.jsxs("div",{className:r(A.AddArticleComment,{},[s]),children:[e.jsx(T,{className:A.AddArticleComment__input,value:i,onChange:_}),e.jsx(p,{onClick:C,children:e.jsx(y,{Svg:fe,className:A.AddArticleComment__icon,height:32,width:32})})]})},ye="_ArticleComment_1uuju_1",be="_ArticleComment__title_1uuju_6",L={ArticleComment:ye,ArticleComment__title:be},De=({className:s,articleId:t})=>e.jsxs("div",{className:r(L.ArticleComment,{},[s]),children:[e.jsx("h3",{className:L.ArticleComment__title,children:"Comments"}),e.jsx(Se,{articleId:t}),e.jsx(Le,{articleId:t})]}),f={},Ee=({className:s})=>{const{id:t}=q(),a=o.useMemo(()=>Number(t),[t]),i=x(Z),l=x(Q),_=F();return o.useEffect(()=>{_(z(a))},[]),l?e.jsx(U,{}):i?e.jsx(w,{className:r(f.ArticleDetailsPage,{},[s]),children:e.jsx(v,{children:e.jsx(X,{})})}):a?e.jsx(w,{Widget:e.jsx(te,{}),className:r(f.ArticleDetailsPage,{},[s]),children:e.jsxs(v,{children:[e.jsx(K,{}),e.jsx(he,{articleId:a}),e.jsx(De,{articleId:a})]})}):e.jsx("div",{children:"not id"})};export{Ee as default};
