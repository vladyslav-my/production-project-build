import{j as r,d as C,P as c,I as u,Q as w,R as y,b as t,T as D,s as x,U as k,r as n,W as _,o as F,X as A,B as j,e as H,A as E,q as B,Y as L,N as R,S as U}from"./index-a0e0f2b4.js";import{R as M}from"./RouteContainer-a7948b33.js";const T=s=>{var e;return(e=s.profile)==null?void 0:e.validateError},$=s=>{var e;return(e=s.profile)==null?void 0:e.isFetching},V=s=>{var e;return(e=s.profile)==null?void 0:e.error},I=s=>{var e;return(e=s.profile)==null?void 0:e.isLoading},S=s=>{var e;return(e=s.profile)==null?void 0:e.readonly},q=s=>s.profile.data,z=s=>{var e;return(e=s.profile)==null?void 0:e.isMe},Q=({className:s,data:e,readOnly:l=!0,isLoading:a,error:i,onFirstNameChange:d,onLastNameChange:P,onAgeChange:m,onAvatarChange:h,onCurrencyChange:p,onCountryChange:g,onChangeCity:v,onChangeUsername:o})=>{var N;return i?r.jsx("div",{children:"error"}):r.jsx("div",{className:C(c.ProfileCard,{},[s]),children:r.jsxs("div",{className:c.ProfileCard__row,children:[r.jsxs("div",{className:c.ProfileCard__leftColumn,children:[r.jsx(u,{className:c.ProfileCard__firstNameInput,label:"Name",readOnly:l,value:e==null?void 0:e.first,onChange:d,disabled:a}),r.jsx(u,{className:c.ProfileCard__lastNameInput,label:"Last name",readOnly:l,value:e==null?void 0:e.lastname,onChange:P,disabled:a}),r.jsx(u,{className:c.ProfileCard__ageInput,label:"Age",readOnly:l,value:(N=e==null?void 0:e.age)==null?void 0:N.toString(),onChange:m,disabled:a}),r.jsx(u,{className:c.ProfileCard__cityInput,label:"City",readOnly:l,value:e==null?void 0:e.city,onChange:v,disabled:a})]}),r.jsxs("div",{className:c.ProfileCard__rightColumn,children:[r.jsx(u,{className:c.ProfileCard__usernameInput,label:"Username",readOnly:l,value:e==null?void 0:e.username,onChange:o,disabled:a}),r.jsx(u,{className:c.ProfileCard__avatarURLInput,label:"Avatar URL",readOnly:l,value:e==null?void 0:e.avatar,onChange:h,disabled:a}),r.jsx(w,{className:c.ProfileCard__currencyDropDown,label:"Currency",readOnly:l,value:e==null?void 0:e.currency,onChange:p,disabled:a}),r.jsx(y,{className:c.ProfileCard__countryDropDown,label:"Country",readOnly:l,value:e==null?void 0:e.country,onChange:g,disabled:a})]})]})})},W=({className:s})=>t(I)?r.jsx(D,{className:s}):null,X=()=>{const s=t(T);return s==null?void 0:s.map(e=>r.jsx("div",{style:{color:"red"},children:e},e))},Y={},G=({className:s})=>{const e=x(),l=t(S),a=t(k),i=t(I),d=n.useCallback(o=>{e(_.setFormData({first:o}))},[e]),P=n.useCallback(o=>{e(_.setFormData({lastname:o}))},[e]),m=n.useCallback(o=>{e(_.setFormData({age:Number(o)}))},[e]),h=n.useCallback(o=>{e(_.setFormData({avatar:o}))},[e]),p=n.useCallback(o=>{e(_.setFormData({currency:o}))},[e]),g=n.useCallback(o=>{e(_.setFormData({username:o}))},[e]),v=n.useCallback(o=>{e(_.setFormData({city:o}))},[e]);return r.jsx(Q,{className:C(Y.FilledProfileCard,{},[s]),data:a,readOnly:l,isLoading:i,onAgeChange:m,onAvatarChange:h,onCurrencyChange:p,onFirstNameChange:d,onLastNameChange:P,onChangeUsername:g,onChangeCity:v})},J="_ProfileHeader_1e17w_1",K="_ProfileHeader__row_1e17w_4",Z="_ProfileHeader__leftBtn_1e17w_15",O="_ProfileHeader__rightBtn_1e17w_25",ee="_ProfileHeader__editAndSave_save_1e17w_30",re="_ProfileHeader__cancel_1e17w_33",se="_ProfileHeader__cancel_hide_1e17w_38",f={ProfileHeader:J,ProfileHeader__row:K,ProfileHeader__leftBtn:Z,ProfileHeader__rightBtn:O,ProfileHeader__editAndSave_save:ee,ProfileHeader__cancel:re,ProfileHeader__cancel_hide:se},le=({className:s})=>{const e=x(),l=t(S),a=t(z),i=t(q),d=t(F);n.useEffect(()=>{(d==null?void 0:d.id)===(i==null?void 0:i.userId)&&e(_.setIsMe(!0))},[]);const P=n.useCallback(()=>{a&&e(_.setReadOnly(!1))},[a]),m=n.useCallback(()=>{!l&&a&&e(A({profileId:i.userId}))},[l,i.userId,a]),h=n.useCallback(()=>{!l&&a&&e(_.cancelEdit())},[l]);return r.jsx("div",{className:C(f.ProfileHeader,{},[s]),children:r.jsxs("div",{className:f.ProfileHeader__row,children:[r.jsx("div",{className:f.ProfileHeader__leftBtn,children:r.jsx(j,{className:C(f.ProfileHeader__cancel,{[f.ProfileHeader__cancel_hide]:l},[]),theme:H.OUTLINE,onClick:l?void 0:h,children:"Cancel"})}),r.jsx(E,{className:f.ProfileHeader__avatar,size:128,src:i.avatar}),r.jsx("div",{className:f.ProfileHeader__rightBtn,children:r.jsx(j,{className:f.ProfileHeader__editAndSave,theme:H.OUTLINE,onClick:l?P:m,children:l?"Edit":"Save"})})]})})},ae="_profileShell_1l3rd_1",oe="_profileShell__pageLoader_1l3rd_5",b={profileShell:ae,profileShell__pageLoader:oe},ce=()=>{const{id:s}=B(),e=n.useMemo(()=>Number(s),[s]),l=x(),a=t($),i=t(V);return n.useEffect(()=>{l(L({profileId:e}))},[l,e]),i?r.jsx(R,{}):a?r.jsx(D,{}):e?r.jsx(M,{children:r.jsxs(U,{className:b.profileShell,children:[r.jsx(le,{}),r.jsx(G,{}),r.jsx(X,{}),r.jsx(W,{className:b.profileShell__pageLoader})]})}):null};export{ce as default};
